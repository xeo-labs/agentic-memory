<svg xmlns="http://www.w3.org/2000/svg" width="600" height="500" viewBox="0 0 600 500">
  <!-- Background -->
  <rect width="600" height="500" fill="#0F172A" rx="10"/>

  <!-- Title -->
  <text x="300" y="35" text-anchor="middle" font-family="monospace" font-size="20" font-weight="700" fill="#F8FAFC">.amem File Format</text>
  <text x="300" y="55" text-anchor="middle" font-family="Arial, Helvetica, sans-serif" font-size="12" fill="#94A3B8">Single-file binary format for agent memory</text>

  <!-- Section layout: x=110..530 (width=420), stacked vertically -->

  <!-- Section 1: HEADER (64 bytes) - Blue -->
  <rect x="110" y="75" width="420" height="55" rx="6" fill="#3B82F6" opacity="0.15" stroke="#3B82F6" stroke-width="1.5"/>
  <rect x="110" y="75" width="8" height="55" rx="3" fill="#3B82F6"/>
  <text x="135" y="96" font-family="monospace" font-size="14" font-weight="700" fill="#3B82F6">HEADER</text>
  <text x="280" y="96" font-family="monospace" font-size="11" fill="#94A3B8">64 bytes</text>
  <text x="135" y="118" font-family="monospace" font-size="11" fill="#F8FAFC">Magic: AMEM | Version: 1 | Dimension: 128</text>
  <!-- Byte offset -->
  <text x="98" y="105" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x00</text>

  <!-- Section 2: NODE TABLE - Purple -->
  <rect x="110" y="140" width="420" height="55" rx="6" fill="#8B5CF6" opacity="0.15" stroke="#8B5CF6" stroke-width="1.5"/>
  <rect x="110" y="140" width="8" height="55" rx="3" fill="#8B5CF6"/>
  <text x="135" y="161" font-family="monospace" font-size="14" font-weight="700" fill="#8B5CF6">NODE TABLE</text>
  <text x="135" y="183" font-family="monospace" font-size="11" fill="#F8FAFC">Fixed-size records | O(1) access by ID</text>
  <!-- Byte offset -->
  <text x="98" y="170" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x40</text>

  <!-- Node detail: mini fields -->
  <rect x="385" y="148" width="55" height="18" rx="3" fill="#8B5CF6" opacity="0.25"/>
  <text x="412" y="161" text-anchor="middle" font-family="monospace" font-size="9" fill="#8B5CF6">type</text>
  <rect x="445" y="148" width="75" height="18" rx="3" fill="#8B5CF6" opacity="0.25"/>
  <text x="482" y="161" text-anchor="middle" font-family="monospace" font-size="9" fill="#8B5CF6">timestamp</text>

  <!-- Section 3: EDGE TABLE - Teal -->
  <rect x="110" y="205" width="420" height="55" rx="6" fill="#14B8A6" opacity="0.15" stroke="#14B8A6" stroke-width="1.5"/>
  <rect x="110" y="205" width="8" height="55" rx="3" fill="#14B8A6"/>
  <text x="135" y="226" font-family="monospace" font-size="14" font-weight="700" fill="#14B8A6">EDGE TABLE</text>
  <text x="135" y="248" font-family="monospace" font-size="11" fill="#F8FAFC">Source &#x2192; Target | 7 edge types</text>
  <!-- Byte offset -->
  <text x="98" y="235" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x--</text>

  <!-- Edge type mini badges -->
  <rect x="350" y="214" width="65" height="16" rx="3" fill="#14B8A6" opacity="0.25"/>
  <text x="382" y="226" text-anchor="middle" font-family="monospace" font-size="8" fill="#14B8A6">caused_by</text>
  <rect x="420" y="214" width="55" height="16" rx="3" fill="#14B8A6" opacity="0.25"/>
  <text x="447" y="226" text-anchor="middle" font-family="monospace" font-size="8" fill="#14B8A6">supports</text>
  <rect x="480" y="214" width="40" height="16" rx="3" fill="#14B8A6" opacity="0.25"/>
  <text x="500" y="226" text-anchor="middle" font-family="monospace" font-size="8" fill="#14B8A6">+5</text>

  <!-- Section 4: CONTENT BLOCK - Green -->
  <rect x="110" y="270" width="420" height="55" rx="6" fill="#22C55E" opacity="0.15" stroke="#22C55E" stroke-width="1.5"/>
  <rect x="110" y="270" width="8" height="55" rx="3" fill="#22C55E"/>
  <text x="135" y="291" font-family="monospace" font-size="14" font-weight="700" fill="#22C55E">CONTENT BLOCK</text>
  <text x="135" y="313" font-family="monospace" font-size="11" fill="#F8FAFC">LZ4 compressed text | Variable-length strings</text>
  <!-- Byte offset -->
  <text x="98" y="300" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x--</text>

  <!-- Compression indicator -->
  <rect x="440" y="278" width="80" height="18" rx="3" fill="#22C55E" opacity="0.25"/>
  <text x="480" y="291" text-anchor="middle" font-family="monospace" font-size="9" fill="#22C55E">LZ4 ~4:1</text>

  <!-- Section 5: FEATURE VECTORS - Orange -->
  <rect x="110" y="335" width="420" height="55" rx="6" fill="#F59E0B" opacity="0.15" stroke="#F59E0B" stroke-width="1.5"/>
  <rect x="110" y="335" width="8" height="55" rx="3" fill="#F59E0B"/>
  <text x="135" y="356" font-family="monospace" font-size="14" font-weight="700" fill="#F59E0B">FEATURE VECTORS</text>
  <text x="135" y="378" font-family="monospace" font-size="11" fill="#F8FAFC">128-dim f32 vectors | Cosine similarity</text>
  <!-- Byte offset -->
  <text x="98" y="365" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x--</text>

  <!-- Vector visual representation -->
  <g transform="translate(420, 343)">
    <rect x="0" y="0" width="6" height="20" rx="1" fill="#F59E0B" opacity="0.6"/>
    <rect x="8" y="4" width="6" height="16" rx="1" fill="#F59E0B" opacity="0.5"/>
    <rect x="16" y="2" width="6" height="18" rx="1" fill="#F59E0B" opacity="0.7"/>
    <rect x="24" y="8" width="6" height="12" rx="1" fill="#F59E0B" opacity="0.4"/>
    <rect x="32" y="1" width="6" height="19" rx="1" fill="#F59E0B" opacity="0.6"/>
    <rect x="40" y="6" width="6" height="14" rx="1" fill="#F59E0B" opacity="0.5"/>
    <rect x="48" y="3" width="6" height="17" rx="1" fill="#F59E0B" opacity="0.65"/>
    <rect x="56" y="10" width="6" height="10" rx="1" fill="#F59E0B" opacity="0.35"/>
    <text x="70" y="14" font-family="monospace" font-size="9" fill="#F59E0B" opacity="0.5">...</text>
  </g>

  <!-- Section 6: INDEXES - Red -->
  <rect x="110" y="400" width="420" height="55" rx="6" fill="#EF4444" opacity="0.15" stroke="#EF4444" stroke-width="1.5"/>
  <rect x="110" y="400" width="8" height="55" rx="3" fill="#EF4444"/>
  <text x="135" y="421" font-family="monospace" font-size="14" font-weight="700" fill="#EF4444">INDEXES</text>
  <text x="135" y="443" font-family="monospace" font-size="11" fill="#F8FAFC">Type | Session | Time | Cluster</text>
  <!-- Byte offset -->
  <text x="98" y="430" text-anchor="end" font-family="monospace" font-size="10" fill="#94A3B8">0x--</text>

  <!-- Index type badges -->
  <rect x="350" y="408" width="45" height="16" rx="3" fill="#EF4444" opacity="0.25"/>
  <text x="372" y="420" text-anchor="middle" font-family="monospace" font-size="8" fill="#EF4444">B-tree</text>
  <rect x="400" y="408" width="55" height="16" rx="3" fill="#EF4444" opacity="0.25"/>
  <text x="427" y="420" text-anchor="middle" font-family="monospace" font-size="8" fill="#EF4444">bitmap</text>
  <rect x="460" y="408" width="60" height="16" rx="3" fill="#EF4444" opacity="0.25"/>
  <text x="490" y="420" text-anchor="middle" font-family="monospace" font-size="8" fill="#EF4444">k-means</text>

  <!-- File size indicator at bottom -->
  <rect x="200" y="470" width="200" height="22" rx="11" fill="#1E293B" stroke="#334155" stroke-width="1"/>
  <text x="300" y="485" text-anchor="middle" font-family="monospace" font-size="11" fill="#94A3B8">10K nodes ~ 8 MB on disk</text>

  <!-- Left margin bracket/ruler -->
  <line x1="80" y1="80" x2="80" y2="450" stroke="#334155" stroke-width="1" stroke-dasharray="2 3"/>
  <text x="80" y="470" text-anchor="middle" font-family="monospace" font-size="9" fill="#94A3B8">offsets</text>
</svg>